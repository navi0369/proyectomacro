### ff3c2d0 – ya se actualizaron todos los .py de scripts/tesis/serie_completa, al parecer esta todo en orden (2025-06-22)

diff --git a/notebooks/tesis/serie_completa/minerales/determinacion_minerales_principales.py b/notebooks/tesis/serie_completa/minerales/determinacion_minerales_principales.py
deleted file mode 100644
index bacf8b7..0000000
--- a/notebooks/tesis/serie_completa/minerales/determinacion_minerales_principales.py
+++ /dev/null
@@ -1,41 +0,0 @@
-# ---
-# jupyter:
-#   jupytext:
-#     text_representation:
-#       extension: .py
-#       format_name: percent
-#       format_version: '1.3'
-#       jupytext_version: 1.17.2
-#   kernelspec:
-#     display_name: .venv
-#     language: python
-#     name: python3
-# ---
-
-# %%
-import pandas as pd
-import sqlite3
-
-conn = sqlite3.connect('../../../../db/proyectomacro.db')
-df_exportaciones_tradicionales_minerales = pd.read_sql_query("SELECT año, minerales FROM exportaciones_tradicionales", conn)
-df_produccion_minerales = pd.read_sql_query("SELECT * FROM exportaciones_minerales_totales where año>1991", conn)
-valor_cols = [c for c in df_produccion_minerales.columns if c.endswith('_valor')]
-print(valor_cols)
-df_produccion_minerales[valor_cols]=df_produccion_minerales[valor_cols]/1000
-
-conn.close()
-
-df_exportaciones_tradicionales_minerales
-
-
-# %%
-df_produccion_minerales
-
-# %%
-total_por_mineral = df_produccion_minerales[valor_cols].sum()
-print(total_por_mineral)
-
-
-# %%
-top4 = total_por_mineral.sort_values(ascending=False).head(4)
-print(top4)
diff --git "a/notebooks/tesis/serie_completa/minerales/esta\303\261o.py" "b/notebooks/tesis/serie_completa/minerales/esta\303\261o.py"
deleted file mode 100644
index 08d5776..0000000
--- "a/notebooks/tesis/serie_completa/minerales/esta\303\261o.py"
+++ /dev/null
@@ -1,233 +0,0 @@
-# ---
-# jupyter:
-#   jupytext:
-#     text_representation:
-#       extension: .py
-#       format_name: percent
-#       format_version: '1.3'
-#       jupytext_version: 1.17.2
-#   kernelspec:
-#     display_name: .venv
-#     language: python
-#     name: python3
-# ---
-
-# %%
-# ─────────────────────────────  PREPARACIÓN  ──────────────────────────────
-import sys, os, sqlite3
-import pandas as pd
-import matplotlib.pyplot as plt
-sys.path.append(os.path.abspath('../'))
-from graficos_utils import *
-from config import *
-
-# 0. Ciclos y carpetas
-output_dir = "../../../../assets/tesis/serie_completa/minerales"
-os.makedirs(output_dir, exist_ok=True)
-set_style()
-
-# 1. Datos ────────────────────────────────────────────────────────────────
-df_estanio = get_df(
-    sql="SELECT año, estaño_volumen, estaño_valor "
-        "FROM exportaciones_minerales_totales WHERE año > 1991",
-    conn_str="../../../../db/proyectomacro.db",
-)
-df_precio = get_df(
-    sql="SELECT año, estaño AS precio_usd_lf "
-        "FROM precio_oficial_minerales WHERE año > 1991",
-    conn_str="../../../../db/proyectomacro.db",
-)
-
-df = df_estanio.join(df_precio, how="inner")
-df["estanio_valor_musd"] = df["estaño_valor"] / 1_000        # miles → millones
-df.drop(columns="estaño_valor", inplace=True)
-
-# ───────────────────────  GRÁFICA DUAL AXIS (valor-precio) ───────────────────────
-cols   = ["estanio_valor_musd", "precio_usd_lf"]
-abbr   = {"estanio_valor_musd": "Valor", "precio_usd_lf": "Precio"}
-colors = {"estanio_valor_musd": "#4682b4", "precio_usd_lf": "#d62728"}  # azul acero + rojo
-
-CYCLES=adjust_cycles(df,CYCLES)
-cycle_stats = {n: df.loc[s, cols].mean().to_dict() for n, s in CYCLES.items()}
-hitos_offset = {yr: .60 for yr in hitos_v}
-
-anot_years = [1992, 2000, 2006, 2014, 2023]
-annotation_offsets = {                     # ↙ ajusta tras ver la figura
-    "estanio_valor_musd": {
-        1992:(0,5), 2000:(0,-15), 2006:(0,-25),
-        2014:(-0.5,-25), 2023:(0,-10)
-    },
-    "precio_usd_lf": {
-        1992:(0,-0.3), 2000:(0.13,0.3), 2006:(-0.4,0.6),
-        2014:(0.5,0.3), 2023:(0.4,-2)
-    },
-}
-growth_periods        = [(1992,2000),(2000,2006),(2006,2014),(2014,2023)]
-period_growth_offsets = {
-    "1992-2000": (1991,0.78), "2000-2006":(2001,0.78),
-    "2006-2014": (2008,0.89), "2014-2023":(2016,0.89)
-}
-cycle_text_offsets = {
-    "Expansión 92-99": (1991,0.92),
-    "Crisis 00-05":    (2001,0.92),
-    "Expansión 06-13": (2008,0.98),
-    "Recesión 14-23":  (2016,0.98),
-}
-
-fig, ax_val = plt.subplots(figsize=(13,8))
-ax_price    = ax_val.twinx()
-
-ax_val.plot(df.index, df["estanio_valor_musd"],
-            label="Valor exportado (M USD)",
-            color=colors["estanio_valor_musd"])
-ax_price.plot(df.index, df["precio_usd_lf"],
-              label="Precio (USD/libra fina)",
-              color=colors["precio_usd_lf"])
-
-add_hitos(ax_val, df.index, hitos_v, hitos_offset, line_kwargs={"lw":1})
-add_cycle_means_multi(
-    ax_val, cycle_stats, cycle_text_offsets,
-    abbr, colors,
-    line_spacing=df["estanio_valor_musd"].max()*0.03,
-    value_fmt="{:,.1f}"
-)
-add_year_value_annotations(
-    ax_val, df, anot_years, ["estanio_valor_musd"],
-    {"estanio_valor_musd": annotation_offsets["estanio_valor_musd"]},
-    {"estanio_valor_musd": colors["estanio_valor_musd"]},
-    arrow_lw=0.6
-)
-add_year_value_annotations(
-    ax_price, df, anot_years, ["precio_usd_lf"],
-    {"precio_usd_lf": annotation_offsets["precio_usd_lf"]},
-    {"precio_usd_lf": colors["precio_usd_lf"]},
-    arrow_lw=0.6,
-    value_fmt="{:,.1f}"
-)
-add_period_growth_annotations_multi(
-    ax_val, df, growth_periods, cols,
-    period_growth_offsets, colors, abbr
-)
-
-ax_val.set_title(f"Estaño: Valor vs. Precio ({df.index[0]}–{df.index[-1]})",
-                 fontweight="bold")
-ax_val.set_xlabel("Año")
-ax_val.set_ylabel("Valor exportado (millones USD)",
-                  color=colors["estanio_valor_musd"])
-ax_price.set_ylabel("Precio (USD por libra fina)",
-                    color=colors["precio_usd_lf"])
-ax_val.tick_params(axis="y", labelcolor=colors["estanio_valor_musd"])
-ax_val.tick_params(axis="x", rotation=45)
-
-h,l   = ax_val.get_legend_handles_labels()
-h2,l2 = ax_price.get_legend_handles_labels()
-hl    = [(x,y) for x,y in zip(h+h2, l+l2) if not y.startswith('_')]
-if hl: ax_val.legend(*zip(*hl), loc="upper left", fontsize=11)
-
-ax_val.set_xticks(df.index[::max(1, len(df)//31)])
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir, "estanio_valor_precio_dual_axis.png"), dpi=300)
-plt.show()
-
-# ──────────────────  GRÁFICA DUAL AXIS (volumen-precio) ──────────────────
-cols_vol   = ["estaño_volumen", "precio_usd_lf"]
-colors_vol = {
-    "estaño_volumen": "tab:blue",
-    "precio_usd_lf":  colors["precio_usd_lf"]   # rojo que definiste arriba
-}
-abbr_vol = {"estaño_volumen": "Vol", "precio_usd_lf": "P"}
-
-cycle_stats_vol = {
-    n: df.loc[s, cols_vol].mean().to_dict()
-    for n, s in CYCLES.items()
-}
-hitos_offset_v = {yr: .81 for yr in hitos_v}
-annotation_offsets_vol = {
-    "estaño_volumen": {
-        1992:(-0.6,-600), 2000:(0,100), 2006:(0,100),
-        2014:(0,120), 2023:(0,-350)
-    },
-    "precio_usd_lf": {
-        1992:(0,-0.3), 2000:(0.15,0.4), 2006:(-0.4,0.6),
-        2014:(0.4,0.4), 2023:(0.4,-0.5)
-    }
-}
-
-period_growth_offsets_vol = {
-    "1992-2000": (1995,0.90), "2000-2006":(2001,0.96),
-    "2006-2014": (2006.2,0.96), "2014-2023":(2016,0.96)
-}
-
-cycle_text_offsets_vol = {
-    "Expansión 92-99": (1995,0.95),
-    "Crisis 00-05":    (2001,1.00),
-    "Expansión 06-13": (2006.2,1.00),
-    "Recesión 14-23":  (2016,1.00),
-}
-
-fig_v, ax_v = plt.subplots(figsize=(13,8))
-ax_price = ax_v.twinx()
-
-# series
-ax_v.plot(df.index, df["estaño_volumen"],
-          label="Volumen (kg finos)",
-          color=colors_vol["estaño_volumen"])
-ax_price.plot(df.index, df["precio_usd_lf"],
-              label="Precio (USD/libra fina)",
-              color=colors_vol["precio_usd_lf"])
-
-# hitos ciclo
-add_hitos(ax_v, df.index, hitos_v, hitos_offset_v, line_kwargs={"lw":1})
-print(hitos_v)
-# espaciado 3 % del rango visible
-y_min, y_max = ax_v.get_ylim()
-line_spacing = (y_max - y_min) * 0.03
-
-# medias por ciclo
-add_cycle_means_multi(
-    ax_v, cycle_stats_vol, cycle_text_offsets_vol,
-    abbr_vol, colors_vol, line_spacing=line_spacing,
-    value_fmt="{:,.1f}"
-)
-
-# anotaciones de valores
-add_year_value_annotations(
-    ax_v, df, anot_years, ["estaño_volumen"],
-    {"estaño_volumen": annotation_offsets_vol["estaño_volumen"]},
-    {"estaño_volumen": colors_vol["estaño_volumen"]}, arrow_lw=0.6
-)
-add_year_value_annotations(
-    ax_price, df, anot_years, ["precio_usd_lf"],
-    {"precio_usd_lf": annotation_offsets_vol["precio_usd_lf"]},
-    {"precio_usd_lf": colors_vol["precio_usd_lf"]}, arrow_lw=0.6,
-    value_fmt="{:,.1f}"
-)
-
-# tasas de crecimiento
-add_period_growth_annotations_multi(
-    ax_v, df, growth_periods, cols_vol,
-    period_growth_offsets_vol, colors_vol, abbr_vol,
-    line_spacing_ratio=0.01
-)
-
-# ejes y leyendas
-ax_v.set_title(f"Estaño: Volumen vs. Precio ({df.index[0]}–{df.index[-1]})",
-               fontweight="bold")
-ax_v.set_xlabel("Año")
-ax_v.set_ylabel("Volumen (kg finos)", color=colors_vol["estaño_volumen"])
-ax_price.set_ylabel("Precio (USD por libra fina)", color=colors_vol["precio_usd_lf"])
-ax_v.tick_params(axis="y", labelcolor=colors_vol["estaño_volumen"])
-ax_price.tick_params(axis="y", labelcolor=colors_vol["precio_usd_lf"])
-ax_v.set_xticks(df.index[::max(1, len(df)//31)])
-ax_v.tick_params(axis="x", rotation=45)
-
-# leyenda combinada
-h1,l1 = ax_v.get_legend_handles_labels()
-h2,l2 = ax_price.get_legend_handles_labels()
-ax_v.legend(h1+h2, l1+l2, loc="upper left", fontsize=11)
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir,"estanio_volumen_precio_dual_axis.png"), dpi=300)
-plt.show()
- 
diff --git a/notebooks/tesis/serie_completa/minerales/grafica_4_minerales.py b/notebooks/tesis/serie_completa/minerales/grafica_4_minerales.py
deleted file mode 100644
index 817a353..0000000
--- a/notebooks/tesis/serie_completa/minerales/grafica_4_minerales.py
+++ /dev/null
@@ -1,167 +0,0 @@
-# ---
-# jupyter:
-#   jupytext:
-#     text_representation:
-#       extension: .py
-#       format_name: percent
-#       format_version: '1.3'
-#       jupytext_version: 1.17.2
-#   kernelspec:
-#     display_name: .venv
-#     language: python
-#     name: python3
-# ---
-
-# %%
-# ───────────────────────────── IMPORTS ──────────────────────────────
-import sys, os, sqlite3
-import numpy as np
-import pandas as pd
-import matplotlib.pyplot as plt
-sys.path.append(os.path.abspath('../'))          # utilidades propias
-from graficos_utils import (
-    add_hitos, add_cycle_means_multi,
-    add_year_value_annotations, add_period_growth_annotations_multi,
-    add_participation_cycle_boxes
-)
-
-# ── 0.  Tramos de ciclo ─────────────────────────────────────────────
-EXPANSION_92_99   = slice(1992, 1999)
-CRISIS_00_05      = slice(2000, 2005)
-ACUMULACION_06_13 = slice(2006, 2013)
-RECESION_14_23    = slice(2014, 2023)
-
-periods = {
-    "Expansión 92-99": EXPANSION_92_99,
-    "Crisis 00-05": CRISIS_00_05,
-    "Expansión 06-13": ACUMULACION_06_13,
-    "Recesión 14-23":  RECESION_14_23,
-}
-
-# ── 1. Configuración general ───────────────────────────────────────
-output_dir = "../../../../assets/tesis/serie_completa/minerales"
-os.makedirs(output_dir, exist_ok=True)
-
-plt.style.use('seaborn-v0_8-whitegrid')
-plt.rcParams.update({
-    'font.family': 'serif', 'font.size': 12,
-    'axes.titlesize': 16,   'axes.labelsize': 14,
-    'grid.linestyle': '--', 'lines.linewidth': 2,
-    'figure.dpi': 150,      'savefig.bbox': 'tight'
-})
-
-# ── 2. Carga de datos ──────────────────────────────────────────────
-with sqlite3.connect('../../../../db/proyectomacro.db') as conn:
-    df = (pd.read_sql(
-                   "SELECT * FROM exportaciones_minerales_totales WHERE año > 1991",
-                   conn)
-                 .set_index('año')
-                 .sort_index())
-
-# Cols de valor (miles USD) → millones USD
-valor_cols = [c for c in df.columns if c.endswith('_valor')]
-df[valor_cols] = df[valor_cols] / 1000            # ⇢ millones USD
-df['total'] = df[valor_cols].sum(axis=1)
-# ── 3. Estadísticas por ciclo ───────────────────────────────────────
-component_cols = ['zinc_valor','oro_valor','plata_valor','estaño_valor']
-cycle_stats = {
-    name: df.loc[period, component_cols].mean().to_dict()
-    for name, period in periods.items()
-}
-
-# ── 4. Offsets y utilidades ─────────────────────────────────────────
-hitos_v      = {1982:"Crisis", 1986:"Expansión", 2000:"Crisis",
-                2006:"Expansión", 2014:"Recesión"}
-hitos_offset = {a:0.82 for a in hitos_v}
-
-medias_offset = {
-    "Expansión 92-99": (1992, 1),
-    "Crisis 00-05": (2000, 1),
-    "Expansión 06-13": (2006, 1),
-    "Recesión 14-23":  (2016, 1),
-}
-
-anot_years = [1992, 2000, 2006, 2014, 2023]  # ajusta a tu gusto
-annotation_offsets = {
-    'zinc_valor': {1992: (0, 350), 2000: (0, 350), 2006: (0, 100), 2014: (0, 50), 2023: (0, -100)},
-    'oro_valor':  {1992: (0, 400), 2000: (0, 350), 2006: (0, 100), 2014: (0, 100), 2023: (0, -100)},
-    'plata_valor': {1992: (0, 300), 2000: (0, 250), 2006: (0, 150), 2014: (0, -130), 2023: (0, -100)},
-    'estaño_valor': {1992: (0, 130), 2000: (0, 130), 2006: (0, -100), 2014: (0, -100), 2023: (0, -100)}
-}
-
-annotation_tasas_offsets = {
-    "1992-2000": (1992, 0.83), 
-    "2000-2006": (2000, 0.83),
-    "2006-2014": (2006, 0.83),
-    "2014-2023": (2016, 0.83),
-}
-participation_offsets = {
-    "1992-2000": (1992, 0.65),
-    "2000-2006": (2000, 0.65),
-    "2006-2014": (2006, 0.65),
-    "2014-2023": (2016, 0.65),
-}
-
-# ── 5. Gráfico ──────────────────────────────────────────────────────
-fig, ax = plt.subplots(figsize=(15, 8))
-
-color_map = {
-    'zinc_valor'  : '#1f77b4',
-    'oro_valor'   : '#ff7f0e',
-    'plata_valor' : '#2ca02c',
-    'estaño_valor': '#d62728',
-}
-labels_map = {
-    'zinc_valor'  : 'Zinc',
-    'oro_valor'   : 'Oro',
-    'plata_valor' : 'Plata',
-    'estaño_valor': 'Estaño',
-}
-
-for col in component_cols:
-    ax.plot(df.index, df[col], label=labels_map[col], color=color_map[col])
-
-# ── 6. Hitos y anotaciones ─────────────────────────────────────────
-add_hitos(ax, df.index, hitos_v, hitos_offset, line_kwargs={'linewidth':0.9})
-
-abbr_map = {c: labels_map[c][0] for c in component_cols}
-line_spacing = ax.get_ylim()[1] * 0.03
-add_cycle_means_multi(ax, cycle_stats, medias_offset,
-                      abbr_map, color_map, line_spacing)
-
-add_year_value_annotations(ax, df, anot_years,
-                           component_cols, annotation_offsets,
-                           color_map, arrow_lw=0.5)
-
-df_g = df.replace(0, np.nan)
-periodos = [(1992, 2000), (2000, 2006), (2006, 2014), (2014, 2023)]
-add_period_growth_annotations_multi(ax, df_g, periodos,
-    component_cols, annotation_tasas_offsets, color_map, abbr_map)
-
-add_participation_cycle_boxes(
-    ax,
-    df,
-    periodos,
-    component_cols,           # componentes
-    'total',              # total de exportaciones tradicionales
-    participation_offsets,
-    abbr_map=abbr_map,
-    colors=color_map
-)
-
-# ── 7. Ajustes finales ──────────────────────────────────────────────
-ax.set_title("Exportaciones de los principales minerales (millones USD, 1992-2024)",
-             fontweight='bold')
-ax.set_xlabel("Año")
-ax.set_ylabel("Millones de dólares")
-ax.set_xticks(df.index[::max(1, len(df)//30)])
-ax.tick_params(axis='x', rotation=45)
-ax.legend(loc='upper left', fontsize=12, ncol=2)
-
-y_min, y_max = ax.get_ylim()
-ax.set_ylim(y_min*1.05, y_max*1.15)
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir, "exportaciones_minerales_valores.png"))
-plt.show()
-
diff --git a/notebooks/tesis/serie_completa/minerales/oro.py b/notebooks/tesis/serie_completa/minerales/oro.py
deleted file mode 100644
index 87b6725..0000000
--- a/notebooks/tesis/serie_completa/minerales/oro.py
+++ /dev/null
@@ -1,343 +0,0 @@
-# ---
-# jupyter:
-#   jupytext:
-#     text_representation:
-#       extension: .py
-#       format_name: percent
-#       format_version: '1.3'
-#       jupytext_version: 1.17.2
-#   kernelspec:
-#     display_name: .venv
-#     language: python
-#     name: python3
-# ---
-
-# %%
-# ─────────────────────────────  PREPARACIÓN  ──────────────────────────────
-import sys, os, sqlite3
-import pandas as pd
-import matplotlib.pyplot as plt
-sys.path.append(os.path.abspath('../'))
-from graficos_utils import (
-    add_hitos, add_cycle_means_multi,
-    add_year_value_annotations, add_period_growth_annotations_multi
-)
-
-# 0. Ciclos y carpetas
-periods = {
-    "Expansión 92-99": slice(1992, 1999),
-    "Crisis 00-05":    slice(2000, 2005),
-    "Expansión 06-13": slice(2006, 2013),
-}
-output_dir = "../../../../assets/tesis/serie_completa/minerales"
-os.makedirs(output_dir, exist_ok=True)
-
-plt.style.use("seaborn-v0_8-whitegrid")
-plt.rcParams.update({
-    "font.family": "serif", "font.size": 12,
-    "axes.titlesize": 16,   "axes.labelsize": 14,
-    "grid.linestyle": "--", "lines.linewidth": 2,
-    "figure.dpi": 150,      "savefig.bbox": "tight",
-})
-
-# 1. Datos ────────────────────────────────────────────────────────────────
-with sqlite3.connect("../../../../db/proyectomacro.db") as conn:
-    df_oro = (pd.read_sql(
-        "SELECT año, oro_volumen, oro_valor "
-        "FROM exportaciones_minerales_totales WHERE año > 1991", conn)
-        .set_index("año")
-        .sort_index()
-    )
-    df_precio = (pd.read_sql(
-        "SELECT año, oro AS precio_usd_ot "
-        "FROM precio_oficial_minerales WHERE año > 1991", conn)
-        .set_index("año")
-        .sort_index()
-    )
-    df_precio.loc[2025, 'precio_usd_ot'] = 3306.0
-    df_precio = df_precio.sort_index()
-
-df = df_oro.join(df_precio, how="outer")
-df["oro_valor_musd"] = df["oro_valor"] / 1_000     # miles → millones
-df.drop(columns="oro_valor", inplace=True)
-df_base = df.loc[:2023]
-df_price = df[["precio_usd_ot"]]
-# ───────────────────────  GRÁFICA DUAL AXIS (valor-precio) ───────────────────────
-cols     = ["oro_valor_musd", "precio_usd_ot"]
-abbr     = {"oro_valor_musd": "Valor", "precio_usd_ot": "Precio"}
-colors   = {"oro_valor_musd": "#1f77b4", "precio_usd_ot": "#c49b07"}   # azul + dorado
-#1f77b4
-cycle_stats = {
-    n: df.loc[s, cols].mean().to_dict()
-    for n, s in periods.items()
-}
-hitos_v      = {2000: "Crisis", 2006: "Expansión", 2014: "Recesión"}
-hitos_offset = {yr: .80 for yr in hitos_v}
-
-anot_years = [1992, 2000, 2006, 2014,2023, 2025]
-annotation_offsets = {
-    "oro_valor_musd": {   # ajuste manual después de inspeccionar el gráfico
-        1992:(0,-50), 2000:(0,70), 2006:(0,60), 2014:(0,40), 2023:(0,-70)
-    },
-    "precio_usd_ot": {
-        1992:(-0.5,60), 2000:(0.0,-80), 2006:(-0.5,25), 2014:(0.3,-350),2023:(0.0,-100), 2025:(0.4,80)
-    },
-}
-# Defino dos listas de periodos:
-growth_periods = [(1992,2000),(2000,2006),(2006,2014)]
-
-period_growth_offsets = {
-    "1992-2000": (1995,0.78), "2000-2006":(2001,0.78),
-    "2006-2014": (2006.2,0.78)
-}
-cycle_text_offsets = {
-    "Expansión 92-99": (1995,0.92),
-    "Crisis 00-05":    (2001,0.92),
-    "Expansión 06-13": (2006.2,0.92)
-}
-
-fig, ax_val = plt.subplots(figsize=(13,8))
-ax_price    = ax_val.twinx()
-
-# series
-ax_val.plot(df_base.index, df_base["oro_valor_musd"],
-            label="Valor exportado (M USD)",
-            color=colors["oro_valor_musd"])
-ax_price.plot(df_price.index, df_price["precio_usd_ot"],
-              label="Precio (USD/oz t)",
-              color=colors["precio_usd_ot"])
-
-# helpers
-add_hitos(ax_val, df.index, hitos_v, hitos_offset, line_kwargs={"linewidth":1})
-add_cycle_means_multi(
-    ax_val, cycle_stats, cycle_text_offsets,
-    abbr, colors, line_spacing=df["oro_valor_musd"].max()*0.03,
-    value_fmt="{:,.0f}"          # 1 decimal para valores pequeños
-)
-add_cycle_means_multi(
-    ax_val, {'2014-2025': {'precio_usd_ot': df.loc[2014:2025,'precio_usd_ot'].mean()}},
-    {"2014-2025": (2014.2,0.99)},
-    {"precio_usd_ot": "Precio"}, colors, line_spacing=df["precio_usd_ot"].max()*0.03,
-    value_fmt="{:,.0f}"          # 1 decimal para valores pequeños
-)
-add_cycle_means_multi(
-    ax_val, {'2014-2023': {'oro_valor_musd': df.loc[2014:2023,'oro_valor_musd'].mean()}},
-    {"2014-2023": (2014.2,0.89)},
-    {"oro_valor_musd": "Valor"}, colors, line_spacing=df["oro_valor_musd"].max()*0.03,
-    value_fmt="{:,.0f}"          # 1 decimal para valores pequeños
-)
-add_year_value_annotations(
-    ax_val,   df, anot_years, ["oro_valor_musd"],
-    {"oro_valor_musd": annotation_offsets["oro_valor_musd"]},
-    {"oro_valor_musd": colors["oro_valor_musd"]}, arrow_lw=0.6
-)
-add_year_value_annotations(
-    ax_price, df, anot_years, ["precio_usd_ot"],
-    {"precio_usd_ot": annotation_offsets["precio_usd_ot"]},
-    {"precio_usd_ot": colors["precio_usd_ot"]}, arrow_lw=0.6,
-    value_fmt="{:,.0f}"
-)
-
-
-# Tasa sólo para el eje izquierdo (valor, hasta 2024)
-add_period_growth_annotations_multi(
-    ax_val, df, growth_periods,
-    cols,
-    period_growth_offsets,
-    colors,
-    abbr,
-)
-growth_periods_for_price = [(2014,2025)]
-add_period_growth_annotations_multi(
-    ax_price, df, growth_periods_for_price,
-    ['precio_usd_ot'],
-    {
-        "2014-2025": (2014.2, 0.79),
-    },
-    colors,
-    {"precio_usd_ot": "Precio"},
-)
-growth_periods_for_val = [(2014,2023)]
-add_period_growth_annotations_multi(
-    ax_val, df, growth_periods_for_val,
-    ['oro_valor_musd'],
-    {
-        "2014-2023": (2014.2, 0.69),
-    },
-    colors,
-    {"oro_valor_musd": "Valor"},
-)
-
-
-# etiquetas
-ax_val.set_title(f"Oro: Valor vs. Precio ({df.index[0]}–{df.index[-1]})",
-                 fontweight="bold")
-ax_val.set_xlabel("Año")
-ax_val.set_ylabel("Valor exportado (millones USD)",
-                  color=colors["oro_valor_musd"])
-ax_price.set_ylabel("Precio (USD por onza t)",
-                    color=colors["precio_usd_ot"])
-ax_val.tick_params(axis="y", labelcolor=colors["oro_valor_musd"])
-ax_price.tick_params(axis="y", labelcolor=colors["precio_usd_ot"])
-ax_val.set_xticks(df.index[::max(1, len(df)//31)])
-ax_val.tick_params(axis="x", rotation=45)
-
-# leyenda filtrada
-h,l  = ax_val.get_legend_handles_labels()
-h2,l2 = ax_price.get_legend_handles_labels()
-hl    = [(x,y) for x,y in zip(h+h2, l+l2) if not y.startswith('_')]
-if hl: ax_val.legend(*zip(*hl), loc="upper left", fontsize=11)
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir, "oro_valor_precio_dual_axis.png"), dpi=300)
-plt.show()
-
-# ──────────────────────  GRÁFICA DUAL AXIS (volumen-precio) ─────────────────────
-cols_vol   = ["oro_volumen", "precio_usd_ot"]
-colors_vol = {
-    "oro_volumen": "tab:blue",          # ya definido
-    "precio_usd_ot": colors["precio_usd_ot"]   # dorado del primer gráfico
-}
-abbr_vol = {"oro_volumen": "Vol", "precio_usd_ot": "P"}
-
-cycle_stats_vol = {
-    n: df.loc[s, cols_vol].mean().to_dict()
-    for n, s in periods.items()
-}
-
-annotation_offsets_vol = {
-    "oro_volumen": {
-        1992:(0,  2), 2000:(0, 1.4), 2006:(-0.17,-1.4),
-        2014:(-0.5,1.3), 2023:(0,-2.0)
-    },
-    "precio_usd_ot": {
-        1992:(0,-95), 2000:(0.2, 50), 2006:(-0.08,95),
-        2014:(0.5,-200), 2023:(0.0,-130), 2025:(0.4,80)
-    }
-}
-
-period_growth_offsets_vol = {
-    "1992-2000": (1995,0.78), "2000-2006":(2002,0.85),
-    "2006-2014": (2008,0.85), "2014-2024":(2016,0.85)
-}
-
-cycle_text_offsets_vol = {
-    "Expansión 92-99": (1995,0.91),
-    "Crisis 00-05":    (2002,0.97),
-    "Expansión 06-13": (2008,0.97),
-    "Recesión 14-24":  (2016,0.97),
-}
-
-fig_v, ax_v = plt.subplots(figsize=(13,8))
-ax_price_v  = ax_v.twinx()
-
-# series
-ax_v.plot(df.index, df["oro_volumen"],
-          label="Volumen (kg finos)",
-          color=colors_vol["oro_volumen"])
-ax_price_v.plot(df.index, df["precio_usd_ot"],
-                label="Precio (USD/oz t)",
-                color=colors_vol["precio_usd_ot"])
-
-# helpers
-add_hitos(ax_v, df.index, hitos_v, hitos_offset, line_kwargs={"lw":1})
-
-# espaciado 3 % del rango visible
-y_min, y_max  = ax_v.get_ylim()
-line_spacing  = (y_max - y_min) * 0.03
-
-# ─── 1) medias estándar de los tres ciclos base (92-99 / 00-05 / 06-13) ───
-add_cycle_means_multi(
-    ax_v, cycle_stats_vol,              # ← dict con 3 ciclos base
-    cycle_text_offsets_vol,
-    abbr_vol, colors_vol,
-    line_spacing=line_spacing,
-    value_fmt="{:,.1f}"
-)
-
-# ─── 2) media 2014-2025 SOLO para el precio ──────────────────────────────
-mean_price_1425 = {'2014-2025': {'precio_usd_ot': df.loc[2014:2025, 'precio_usd_ot'].mean()}}
-
-add_cycle_means_multi(
-    ax_price_v, mean_price_1425,
-    {"2014-2025": (2014.2, 0.99)},      # posición del bloque
-    {"precio_usd_ot": "P"},
-    colors_vol,
-    line_spacing=df['precio_usd_ot'].max() * 0.03,
-    value_fmt="{:,.1f}"
-)
-
-# ─── 3) media 2014-2023 SOLO para el volumen ─────────────────────────────
-mean_vol_1423 = {'2014-2023': {'oro_volumen': df.loc[2014:2023, 'oro_volumen'].mean()}}
-
-add_cycle_means_multi(
-    ax_v, mean_vol_1423,
-    {"2014-2023": (2014.2, 0.89)},      # posición del bloque
-    {"oro_volumen": "Vol"},
-    colors_vol,
-    line_spacing=df['oro_volumen'].max() * 0.03,
-    value_fmt="{:,.1f}"
-)
-
-add_year_value_annotations(
-    ax_v, df, anot_years, ["oro_volumen"],
-    {"oro_volumen": annotation_offsets_vol["oro_volumen"]},
-    {"oro_volumen": colors_vol["oro_volumen"]}, arrow_lw=0.6
-)
-add_year_value_annotations(
-    ax_price_v, df, anot_years, ["precio_usd_ot"],
-    {"precio_usd_ot": annotation_offsets_vol["precio_usd_ot"]},
-    {"precio_usd_ot": colors_vol["precio_usd_ot"]}, arrow_lw=0.6,
-    value_fmt="{:,.1f}"
-)
-
-add_period_growth_annotations_multi(
-    ax_v, df, growth_periods, cols_vol,
-    period_growth_offsets_vol, colors_vol, abbr_vol,
-    line_spacing_ratio=0.03
-)
-growth_periods_for_price = [(2014,2025)]
-add_period_growth_annotations_multi(
-    ax_price_v, df, growth_periods_for_price,
-    ['precio_usd_ot'],
-    {
-        "2014-2025": (2014.2, 0.81),
-    },
-    colors_vol,
-    {"precio_usd_ot": "Precio"},
-)
-growth_periods_for_vol = [(2014,2023)]
-add_period_growth_annotations_multi(
-    ax_price_v, df, growth_periods_for_vol,
-    ['oro_volumen'],
-    {
-        "2014-2023": (2014.2, 0.7),
-    },
-    colors_vol,
-    {"oro_volumen": "Volumen"},
-)
-# etiquetas
-ax_v.set_title(f"Oro: Volumen vs. Precio ({df.index[0]}–{df.index[-1]})",
-               fontweight="bold")
-ax_v.set_xlabel("Año")
-ax_v.set_ylabel("Volumen (kg finos)", color=colors_vol["oro_volumen"])
-ax_price_v.set_ylabel("Precio (USD por onza t)", color=colors_vol["precio_usd_ot"])
-
-ax_v.tick_params(axis="y", labelcolor=colors_vol["oro_volumen"])
-ax_price_v.tick_params(axis="y", labelcolor=colors_vol["precio_usd_ot"])
-ax_v.set_xticks(df.index[::max(1, len(df)//31)])
-ax_v.tick_params(axis="x", rotation=45)
-
-# leyenda combinada
-h1,l1 = ax_v.get_legend_handles_labels()
-h2,l2 = ax_price_v.get_legend_handles_labels()
-ax_v.legend(h1+h2, l1+l2, loc="upper left", fontsize=11)
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir, "oro_volumen_precio_dual_axis.png"), dpi=300)
-plt.show()
-
-
-
-# %%
-df
diff --git a/notebooks/tesis/serie_completa/minerales/plata.py b/notebooks/tesis/serie_completa/minerales/plata.py
deleted file mode 100644
index f5d5ef5..0000000
--- a/notebooks/tesis/serie_completa/minerales/plata.py
+++ /dev/null
@@ -1,249 +0,0 @@
-# ---
-# jupyter:
-#   jupytext:
-#     text_representation:
-#       extension: .py
-#       format_name: percent
-#       format_version: '1.3'
-#       jupytext_version: 1.17.2
-#   kernelspec:
-#     display_name: .venv
-#     language: python
-#     name: python3
-# ---
-
-# %%
-# ─────────────────────────────  PREPARACIÓN  ──────────────────────────────
-import sys, os, sqlite3
-import pandas as pd
-import matplotlib.pyplot as plt
-sys.path.append(os.path.abspath('../'))
-from graficos_utils import (
-    add_hitos, add_cycle_means_multi,
-    add_year_value_annotations, add_period_growth_annotations_multi
-)
-
-# 0. Ciclos y carpetas
-periods = {
-    "Expansión 92-99": slice(1992, 1999),
-    "Crisis 00-05":    slice(2000, 2005),
-    "Expansión 06-13": slice(2006, 2013),
-    "Recesión 14-23":  slice(2014, 2023),
-}
-output_dir = "../../../../assets/tesis/serie_completa/minerales"
-os.makedirs(output_dir, exist_ok=True)
-
-plt.style.use("seaborn-v0_8-whitegrid")
-plt.rcParams.update({
-    "font.family": "serif", "font.size": 12,
-    "axes.titlesize": 16,   "axes.labelsize": 14,
-    "grid.linestyle": "--", "lines.linewidth": 2,
-    "figure.dpi": 150,      "savefig.bbox": "tight",
-})
-
-# 1. Datos ────────────────────────────────────────────────────────────────
-with sqlite3.connect("../../../../db/proyectomacro.db") as conn:
-    df_plata = (pd.read_sql(
-        "SELECT año, plata_volumen, plata_valor "
-        "FROM exportaciones_minerales_totales WHERE año > 1991", conn)
-        .set_index("año")
-        .sort_index()
-    )
-    df_precio = (pd.read_sql(
-        "SELECT año, plata AS precio_usd_ot "
-        "FROM precio_oficial_minerales WHERE año > 1991", conn)
-        .set_index("año")
-        .sort_index()
-    )
-
-df = df_plata.join(df_precio, how="inner")
-df["plata_valor_musd"] = df["plata_valor"] / 1_000   # miles → millones
-df.drop(columns="plata_valor", inplace=True)
-
-# ───────────────────────  GRÁFICA DUAL AXIS (valor-precio) ───────────────────────
-cols   = ["plata_valor_musd", "precio_usd_ot"]
-abbr   = {"plata_valor_musd": "Valor", "precio_usd_ot": "Precio"}
-colors = {"plata_valor_musd": "#7f7f7f", "precio_usd_ot": "#1f77b4"}
-
-cycle_stats = {n: df.loc[s, cols].mean().to_dict() for n, s in periods.items()}
-
-hitos_v      = {2000: "Crisis", 2006: "Expansión", 2014: "Recesión"}
-hitos_offset = {yr: .60 for yr in hitos_v}
-
-anot_years = [1992, 2000, 2006, 2014, 2023]
-annotation_offsets = {
-    "plata_valor_musd": {
-        1992:(0,25), 2000:(0,-45), 2006:(0,45),
-        2014:(0.5,40), 2023:(0,30)
-    },
-    "precio_usd_ot": {
-        1992:(0,-1), 2000:(0,0.6), 2006:(-0.5,1),
-        2014:(-0.5,-1), 2023:(0.55,-1)
-    },
-}
-growth_periods        = [(1992,2000),(2000,2006),(2006,2014),(2014,2023)]
-period_growth_offsets = {
-    "1992-2000": (1991,0.78), "2000-2006":(2001,0.78),
-    "2006-2014": (2006.2,0.78), "2014-2023":(2016,0.78)
-}
-cycle_text_offsets = {
-    "Expansión 92-99": (1991,0.92),
-    "Crisis 00-05":    (2001,0.92),
-    "Expansión 06-13": (2006.2,0.92),
-    "Recesión 14-23":  (2016,0.92),
-}
-
-fig, ax_val = plt.subplots(figsize=(13,8))
-ax_price    = ax_val.twinx()
-
-ax_val.plot(df.index, df["plata_valor_musd"],
-            label="Valor exportado (M USD)",
-            color=colors["plata_valor_musd"])
-ax_price.plot(df.index, df["precio_usd_ot"],
-              label="Precio (USD/oz t)",
-              color=colors["precio_usd_ot"])
-
-add_hitos(ax_val, df.index, hitos_v, hitos_offset, line_kwargs={"lw":1})
-add_cycle_means_multi(
-    ax_val, cycle_stats, cycle_text_offsets,
-    abbr, colors, line_spacing=df["plata_valor_musd"].max()*0.03,
-    value_fmt="{:,.1f}"
-)
-add_year_value_annotations(
-    ax_val, df, anot_years, ["plata_valor_musd"],
-    {"plata_valor_musd": annotation_offsets["plata_valor_musd"]},
-    {"plata_valor_musd": colors["plata_valor_musd"]}, arrow_lw=0.6
-)
-add_year_value_annotations(
-    ax_price, df, anot_years, ["precio_usd_ot"],
-    {"precio_usd_ot": annotation_offsets["precio_usd_ot"]},
-    {"precio_usd_ot": colors["precio_usd_ot"]}, arrow_lw=0.6,
-    value_fmt="{:,.1f}"
-)
-add_period_growth_annotations_multi(
-    ax_val, df, growth_periods, cols,
-    period_growth_offsets, colors, abbr
-)
-
-ax_val.set_title(f"Plata: Valor vs. Precio ({df.index[0]}–{df.index[-1]})",
-                 fontweight="bold")
-ax_val.set_xlabel("Año")
-ax_val.set_ylabel("Valor exportado (millones USD)",
-                  color=colors["plata_valor_musd"])
-ax_price.set_ylabel("Precio (USD por onza t)",
-                    color=colors["precio_usd_ot"])
-ax_val.tick_params(axis="y", labelcolor=colors["plata_valor_musd"])
-ax_price.tick_params(axis="y", labelcolor=colors["precio_usd_ot"])
-ax_val.set_xticks(df.index[::max(1,len(df)//31)])
-ax_val.tick_params(axis="x", rotation=45)
-
-h,l   = ax_val.get_legend_handles_labels()
-h2,l2 = ax_price.get_legend_handles_labels()
-hl    = [(x,y) for x,y in zip(h+h2, l+l2) if not y.startswith('_')]
-if hl: ax_val.legend(*zip(*hl), loc="upper left", fontsize=11)
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir, "plata_valor_precio_dual_axis.png"), dpi=300)
-plt.show()
-
-# ──────────────────  GRÁFICA DUAL AXIS (volumen-precio) ──────────────────
-cols_vol   = ["plata_volumen", "precio_usd_ot"]
-colors_vol = {
-    "plata_volumen": "tab:gray",
-    "precio_usd_ot": colors["precio_usd_ot"]          # azul del gráfico principal
-}
-abbr_vol = {"plata_volumen": "Vol", "precio_usd_ot": "P"}
-
-cycle_stats_vol = {
-    n: df.loc[s, cols_vol].mean().to_dict()
-    for n, s in periods.items()
-}
-
-annotation_offsets_vol = {
-    "plata_volumen": {
-        1992:(0,40), 2000:(0,20), 2006:(0.5,-25),
-        2014:(0,20), 2023:(0,15)
-    },
-    "precio_usd_ot": {
-        1992:(0,-1), 2000:(0,-0.73), 2006:(-0.1,1.2),
-        2014:(-1,-1), 2023:(0.55,-1)
-    }
-}
-
-period_growth_offsets_vol = {
-    "1992-2000": (1995,0.80), "2000-2006":(2002,0.80),
-    "2006-2014": (2008,0.33), "2014-2023":(2016,0.33)
-}
-
-cycle_text_offsets_vol = {
-    "Expansión 92-99": (1995,0.90),
-    "Crisis 00-05":    (2002,0.90),
-    "Expansión 06-13": (2008,0.43),
-    "Recesión 14-23":  (2016,0.43),
-}
-
-fig_v, ax_v = plt.subplots(figsize=(13,8))
-ax_price_v = ax_v.twinx()
-
-# series
-ax_v.plot(df.index, df["plata_volumen"],
-          label="Volumen (kg finos)",
-          color=colors_vol["plata_volumen"])
-ax_price_v.plot(df.index, df["precio_usd_ot"],
-                label="Precio (USD/oz t)",
-                color=colors_vol["precio_usd_ot"])
-
-# hitos
-add_hitos(ax_v, df.index, hitos_v, hitos_offset, line_kwargs={"lw":1})
-
-# espaciado relativo
-y_min, y_max = ax_v.get_ylim()
-line_spacing = (y_max - y_min) * 0.03
-
-# medias por ciclo
-add_cycle_means_multi(
-    ax_v, cycle_stats_vol, cycle_text_offsets_vol,
-    abbr_vol, colors_vol, line_spacing=line_spacing,
-    value_fmt="{:,.1f}"
-)
-
-# anotaciones de año
-add_year_value_annotations(
-    ax_v, df, anot_years, ["plata_volumen"],
-    {"plata_volumen": annotation_offsets_vol["plata_volumen"]},
-    {"plata_volumen": colors_vol["plata_volumen"]}, arrow_lw=0.6
-)
-add_year_value_annotations(
-    ax_price_v, df, anot_years, ["precio_usd_ot"],
-    {"precio_usd_ot": annotation_offsets_vol["precio_usd_ot"]},
-    {"precio_usd_ot": colors_vol["precio_usd_ot"]}, arrow_lw=0.6,
-    value_fmt="{:,.1f}"
-)
-
-# tasas de crecimiento
-add_period_growth_annotations_multi(
-    ax_v, df, growth_periods, cols_vol,
-    period_growth_offsets_vol, colors_vol, abbr_vol,
-    line_spacing_ratio=0.03
-)
-
-# ejes y leyenda
-ax_v.set_title(f"Plata: Volumen vs. Precio ({df.index[0]}–{df.index[-1]})",
-               fontweight="bold")
-ax_v.set_xlabel("Año")
-ax_v.set_ylabel("Volumen (kg finos)", color=colors_vol["plata_volumen"])
-ax_price_v.set_ylabel("Precio (USD por onza t)", color=colors_vol["precio_usd_ot"])
-ax_v.tick_params(axis="y", labelcolor=colors_vol["plata_volumen"])
-ax_price_v.tick_params(axis="y", labelcolor=colors_vol["precio_usd_ot"])
-ax_v.set_xticks(df.index[::max(1,len(df)//31)])
-ax_v.tick_params(axis="x", rotation=45)
-
-h1,l1 = ax_v.get_legend_handles_labels()
-h2,l2 = ax_price_v.get_legend_handles_labels()
-ax_v.legend(h1+h2, l1+l2, loc="upper left", fontsize=11)
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir,"plata_volumen_precio_dual_axis.png"), dpi=300)
-plt.show()
-
-
diff --git a/notebooks/tesis/serie_completa/minerales/zinc.py b/notebooks/tesis/serie_completa/minerales/zinc.py
deleted file mode 100644
index 7090628..0000000
--- a/notebooks/tesis/serie_completa/minerales/zinc.py
+++ /dev/null
@@ -1,249 +0,0 @@
-# ---
-# jupyter:
-#   jupytext:
-#     text_representation:
-#       extension: .py
-#       format_name: percent
-#       format_version: '1.3'
-#       jupytext_version: 1.17.2
-#   kernelspec:
-#     display_name: .venv
-#     language: python
-#     name: python3
-# ---
-
-# %%
-# ─────────────────────────────  PREPARACIÓN  ──────────────────────────────
-import sys, os, sqlite3
-import pandas as pd
-import matplotlib.pyplot as plt
-sys.path.append(os.path.abspath('../'))
-from graficos_utils import (
-    add_hitos, add_cycle_means_multi,
-    add_year_value_annotations, add_period_growth_annotations_multi
-)
-
-# 0. Ciclos y carpetas
-periods = {
-    "Expansión 92-99": slice(1992, 1999),
-    "Crisis 00-05":    slice(2000, 2005),
-    "Expansión 06-13": slice(2006, 2013),
-    "Recesión 14-23":  slice(2014, 2023),
-}
-output_dir = "../../../../assets/tesis/serie_completa/minerales"
-os.makedirs(output_dir, exist_ok=True)
-
-plt.style.use("seaborn-v0_8-whitegrid")
-plt.rcParams.update({
-    "font.family": "serif", "font.size": 12,
-    "axes.titlesize": 16,   "axes.labelsize": 14,
-    "grid.linestyle": "--", "lines.linewidth": 2,
-    "figure.dpi": 150,      "savefig.bbox": "tight",
-})
-
-# 1. Datos ────────────────────────────────────────────────────────────────
-with sqlite3.connect("../../../../db/proyectomacro.db") as conn:
-    df_zinc = (pd.read_sql(
-        "SELECT año, zinc_volumen, zinc_valor FROM exportaciones_minerales_totales "
-        "WHERE año > 1991", conn)
-        .set_index("año")
-        .sort_index()
-    )
-    df_precio = (pd.read_sql(
-        "SELECT año, zinc AS precio_usd_oz "
-        "FROM precio_oficial_minerales WHERE año > 1991", conn)
-        .set_index("año")
-        .sort_index()
-    )
-
-df = df_zinc.join(df_precio, how="inner")
-df["zinc_valor_musd"] = df["zinc_valor"] / 1_000     # miles → millones
-df.drop(columns="zinc_valor", inplace=True)
-
-# ───────────────────────  GRÁFICA DUAL AXIS (valor-precio) ───────────────────────
-cols     = ["zinc_valor_musd", "precio_usd_oz"]
-abbr     = {"zinc_valor_musd": "Valor", "precio_usd_oz": "Precio"}
-colors   = {"zinc_valor_musd": "#1f77b4", "precio_usd_oz": "#d62728"}
-
-cols_dual = ["zinc_valor_musd", "precio_usd_oz"]
-
-cycle_stats = {
-    nombre: df.loc[rango, cols_dual].mean().to_dict()
-    for nombre, rango in periods.items()
-}
-print(cycle_stats)
-hitos_v       = {2000: "Crisis", 2006: "Expansión", 2014: "Recesión"}
-hitos_offset  = {yr: .60 for yr in hitos_v}
-
-anot_years = [1992, 2000, 2006, 2014, 2023]
-annotation_offsets = {
-    "zinc_valor_musd": {
-        1992:(0,50), 2000:(0,-80), 2006:(0,90), 2014:(0,60), 2023:(0,-50)
-    },
-    "precio_usd_oz": {
-        1992:(0,-0.03),  2000:(0.13,0.08),  2006:(0,0.05), 2014:(0,-0.1), 2023:(0.5,-0.03)
-    },
-}
-growth_periods        = [(1992,2000),(2000,2006),(2006,2014),(2014,2023)]
-period_growth_offsets = {
-    "1992-2000": (1991,0.76), "2000-2006":(2001,0.76),
-    "2006-2014": (2008,0.76), "2014-2023":(2016,0.26)
-}
-cycle_text_offsets = {
-    "Expansión 92-99": (1991,0.9),
-    "Crisis 00-05":    (2001,0.9),
-    "Expansión 06-13": (2008,0.9),
-    "Recesión 14-23":  (2016,0.4),
-}
-
-fig, ax_val = plt.subplots(figsize=(13,8))
-ax_price    = ax_val.twinx()
-
-# series
-ax_val.plot(df.index, df["zinc_valor_musd"], label="Valor exportado (M USD)",
-            color=colors["zinc_valor_musd"])
-ax_price.plot(df.index, df["precio_usd_oz"],   label="Precio (USD/oz)",
-            color=colors["precio_usd_oz"])
-
-# helpers
-add_hitos(ax_val, df.index, hitos_v, hitos_offset, line_kwargs={"linewidth":1})
-add_cycle_means_multi(ax_val, cycle_stats, cycle_text_offsets,
-                      abbr, colors, line_spacing=df["zinc_valor_musd"].max()*0.03,
-                      value_fmt="{:,.1f}")
-add_year_value_annotations(
-    ax_val,   df, anot_years, ["zinc_valor_musd"],
-    {"zinc_valor_musd": annotation_offsets["zinc_valor_musd"]},
-    {"zinc_valor_musd": colors["zinc_valor_musd"]}, arrow_lw=0.6
-)
-add_year_value_annotations(
-    ax_price, df, anot_years, ["precio_usd_oz"],
-    {"precio_usd_oz": annotation_offsets["precio_usd_oz"]},
-    {"precio_usd_oz": colors["precio_usd_oz"]}, arrow_lw=0.6,
-    value_fmt="{:,.1f}"
-)
-add_period_growth_annotations_multi(
-    ax_val, df, growth_periods, cols,
-    period_growth_offsets, colors, abbr
-)
-
-# etiquetas
-ax_val.set_title(f"Zinc: Valor vs. Precio ({df.index[0]}–{df.index[-1]})",
-                 fontweight="bold")
-ax_val.set_xlabel("Año")
-ax_val.set_ylabel("Valor exportado (millones USD)", color=colors["zinc_valor_musd"])
-ax_price.set_ylabel("Precio (USD por onza)",         color=colors["precio_usd_oz"])
-ax_val.tick_params(axis="y", labelcolor=colors["zinc_valor_musd"])
-ax_price.tick_params(axis="y", labelcolor=colors["precio_usd_oz"])
-ax_val.set_xticks(df.index[::max(1,len(df)//31)])
-ax_val.tick_params(axis="x", rotation=45)
-
-# leyenda filtrada
-h,l = ax_val.get_legend_handles_labels()
-h2,l2 = ax_price.get_legend_handles_labels()
-hl = [(x,y) for x,y in zip(h+h2,l+l2) if not y.startswith('_')]
-if hl: ax_val.legend(*zip(*hl), loc="upper left", fontsize=11)
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir,"zinc_valor_precio_dual_axis.png"), dpi=300)
-plt.show()
-
-# ──────────────────  GRÁFICA DUAL AXIS (volumen-precio) ──────────────────
-cols_vol   = ["zinc_volumen", "precio_usd_oz"]
-colors_vol = {
-    "zinc_volumen": "tab:blue",
-    "precio_usd_oz": colors["precio_usd_oz"]       # rojo definido antes
-}
-abbr_vol = {"zinc_volumen": "Vol", "precio_usd_oz": "P"}
-
-cycle_stats_vol = {
-    n: df.loc[s, cols_vol].mean().to_dict()
-    for n, s in periods.items()
-}
-
-annotation_offsets_vol = {
-    "zinc_volumen": {
-        1992:(0,1e4), 2000:(-0.5,-2.2e4), 2006:(0,-3.7e4),
-        2014:(0,1e4), 2023:(0,2.8e4)
-    },
-    "precio_usd_oz": {
-        1992:(0,-0.03), 2000:(0.13,0.08), 2006:(0,0.05),
-        2014:(0,-0.1),  2023:(0.5,-0.03)
-    }
-}
-
-period_growth_offsets_vol = {
-    "1992-2000": (1991,0.84), "2000-2006":(2000.2,0.84),
-    "2006-2014": (2008,0.91), "2014-2023":(2016,0.39)
-}
-
-cycle_text_offsets_vol = {
-    "Expansión 92-99": (1991,0.93),
-    "Crisis 00-05":    (2000.2,0.93),
-    "Expansión 06-13": (2008,0.99),
-    "Recesión 14-23":  (2016,0.50),
-}
-
-fig_v, ax_v = plt.subplots(figsize=(13,8))
-ax_price_v  = ax_v.twinx()
-
-# series
-ax_v.plot(df.index, df["zinc_volumen"],
-          label="Volumen (kg finos)",
-          color=colors_vol["zinc_volumen"])
-ax_price_v.plot(df.index, df["precio_usd_oz"],
-                label="Precio (USD/oz)",
-                color=colors_vol["precio_usd_oz"])
-
-# hitos
-add_hitos(ax_v, df.index, hitos_v, hitos_offset, line_kwargs={"lw":1})
-
-# espaciado relativo
-y_min, y_max = ax_v.get_ylim()
-line_spacing = (y_max - y_min) * 0.03
-
-# medias por ciclo
-add_cycle_means_multi(
-    ax_v, cycle_stats_vol, cycle_text_offsets_vol,
-    abbr_vol, colors_vol, line_spacing=line_spacing,
-    value_fmt="{:,.1f}"
-)
-
-# anotaciones de año
-add_year_value_annotations(
-    ax_v, df, anot_years, ["zinc_volumen"],
-    {"zinc_volumen": annotation_offsets_vol["zinc_volumen"]},
-    {"zinc_volumen": colors_vol["zinc_volumen"]}, arrow_lw=0.6
-)
-add_year_value_annotations(
-    ax_price_v, df, anot_years, ["precio_usd_oz"],
-    {"precio_usd_oz": annotation_offsets_vol["precio_usd_oz"]},
-    {"precio_usd_oz": colors_vol["precio_usd_oz"]}, arrow_lw=0.6,
-    value_fmt="{:,.1f}"
-)
-
-# tasas de crecimiento
-add_period_growth_annotations_multi(
-    ax_v, df, growth_periods, cols_vol,
-    period_growth_offsets_vol, colors_vol, abbr_vol,
-    line_spacing_ratio=0.03
-)
-
-# ejes y leyenda
-ax_v.set_title(f"Zinc: Volumen vs. Precio ({df.index[0]}–{df.index[-1]})",
-               fontweight="bold")
-ax_v.set_xlabel("Año")
-ax_v.set_ylabel("Volumen (kg finos)", color=colors_vol["zinc_volumen"])
-ax_price_v.set_ylabel("Precio (USD por onza)", color=colors_vol["precio_usd_oz"])
-ax_v.tick_params(axis="y", labelcolor=colors_vol["zinc_volumen"])
-ax_price_v.tick_params(axis="y", labelcolor=colors_vol["precio_usd_oz"])
-ax_v.set_xticks(df.index[::max(1,len(df)//31)])
-ax_v.tick_params(axis="x", rotation=45)
-
-h1,l1 = ax_v.get_legend_handles_labels()
-h2,l2 = ax_price_v.get_legend_handles_labels()
-ax_v.legend(h1+h2, l1+l2, loc="upper left", fontsize=11)
-
-plt.tight_layout()
-plt.savefig(os.path.join(output_dir, "zinc_volumen_precio_dual_axis.png"), dpi=300)
-plt.show()
-
diff --git a/scripts/tesis/serie_completa/grado_de_apertura.py b/scripts/tesis/serie_completa/grado_de_apertura.py
index 3c94752..9ccce52 100644
--- a/scripts/tesis/serie_completa/grado_de_apertura.py
+++ b/scripts/tesis/serie_completa/grado_de_apertura.py
@@ -20,68 +20,32 @@ import sys
 import matplotlib.pyplot as plt
 import sqlite3, os
 sys.path.append(os.path.abspath('../'))
-from graficos_utils import add_hitos, add_period_growth_annotations_multi, add_cycle_means_multi, add_year_value_annotations
+from graficos_utils import *
+from config import *
 
-# ── 0.  Tramos de ciclo (los mismos que usas en el resto de la tesis) ─────────
-EXPANSION_50_70   = slice(1950, 1970)   # Expansión
-RECESION_71_84    = slice(1971, 1984)   # Recesión
-EXPANSION_85_05   = slice(1985, 2005)   # Expansión
-ACUMULACION_05_14 = slice(2005, 2014)   # Acumulación (expansión)
-RECESION_15_22    = slice(2015, 2022)   # Recesión
-
-periods = {
-    "Expansión 50-70":   slice(1950, 1970),
-    "Recesión 71-84":    slice(1971, 1984),
-    "Expansión 85-05":   slice(1985, 2005),
-    "Expansión 06-14": slice(2006, 2014),
-    "Recesión 15-22":    slice(2015, 2022),
-}
 
 # ── 1. Configuración general de la figura y salida ───────────────────────────
 output_dir = "../../../assets/tesis/serie_completa"
-os.makedirs(output_dir, exist_ok=True)
+os.makedirs(output_dir, exist_ok=True)  
 
-
-plt.style.use('seaborn-v0_8-whitegrid')
-plt.rcParams.update({
-    'font.family':  'serif',
-    'font.size':    12,
-    'axes.titlesize': 16,
-    'axes.labelsize': 14,
-    'grid.linestyle': '--',
-    'lines.linewidth': 2,
-    'figure.dpi':   150,
-    'savefig.bbox': 'tight',
-})
+set_style()
 
 # ── 2. Carga de tabla grado_de_apertura ──────────────────────────────────────
 db_path = '../../../db/proyectomacro.db'
 query   = "SELECT * FROM grado_de_apertura"        # columnas: año, grado
-with sqlite3.connect(db_path) as conn:
-    df = pd.read_sql(query, conn, index_col='año')
-
-df.sort_index(inplace=True)        # asegura orden cronológico
-df.rename(columns={'grado': 'GA'}, inplace=True)   # más corto
-
-
+df = get_df(query, db_path,rename={'grado':'GA'})
 
 # ── 3. Estadísticas por ciclo (medias) ───────────────────────────────────────
 cycle_stats = {
     name: df.loc[period].mean().to_dict()
-    for name, period in periods.items()
+    for name, period in CYCLES.items()
 }
 component_colors = {
     'GA': '#1f77b4'
 }
 
 # ── 4. Líneas verticales de hitos (mismos años que el gráfico de PIB) ───────
-hitos_v = {
-    1950: "Expansion",
-    1971: "Recesion",
-    1985: "Expansion",
-    2005: "Expansion",
-    2015: "Recesion"
-}
+
 annotation_offsets = {
     "GA": {
         1950: (-0.3,  3.0),
@@ -120,13 +84,7 @@ ax.plot(df.index, df['GA'], color='tab:blue', label='Grado de apertura (X+M)/PIB
 y_max = ax.get_ylim()[1]
 add_hitos(ax, df.index, hitos_v, hitos_offset)
 #anotaciones de tasas
-periodos = [
-    (1950, 1970),
-    (1971, 1984),
-    (1985, 2005),
-    (2005, 2014),
-    (2015,2022)
-]
+
 anot_years = [1950,1971,1985, 2005, 2015,2022]
 abbr_map = {
     "GA":"GA",
@@ -134,7 +92,7 @@ abbr_map = {
 columnas=["GA"]
 add_year_value_annotations(ax,df,anot_years,columnas,annotation_offsets,component_colors)
 add_period_growth_annotations_multi(
-    ax, df, periodos,
+    ax, df, periodos_tasas_sin_crisis,
     columnas,
     tasas_offsets,
     component_colors,
@@ -168,36 +126,22 @@ plt.show()
 
 
 # %%
-# ── 0.  Tramos de ciclo (los mismos que usas en el resto de la tesis) ─────────
-PERIODO_1 = slice(1950, 1984)   # Crisis
-PERIODO_2 = slice(1985, 2005)   # Expansión
-PERIODO_3 = slice(2006, 2022)   # Recesión
 
-periods = {
-    "1950-1984":   PERIODO_1,
-    "1985-2005":   PERIODO_2,
-    "2006-2022":   PERIODO_3,
-}
 # ── 3. Estadísticas por ciclo (medias) ───────────────────────────────────────
 cycle_stats = {
     name: df.loc[period].mean().to_dict()
-    for name, period in periods.items()
+    for name, period in CYCLES_PERIODOS.items()
 }
 component_colors = {
     'GA': '#1f77b4'
 }
 
-# ── 4. Líneas verticales de hitos (mismos años que el gráfico de PIB) ───────
-hitos_v = {
-    1950: "1950-1984",
-    1985: "1985-2005",
-    2006: "2006-2022",
-}
+
 annotation_offsets = {
     "GA": {
         1950: (-0.3,  3.0),
         1985: ( 1.0,  0),
-        2006: (0,  3.0),
+        2008: (0,  3.0),
     }
 }
 
@@ -208,7 +152,7 @@ hitos_offset = {
 tasas_offsets = {
     "1950-1985": (1958.3, 0.99),
     "1985-2006": (1992, 0.99),
-    "2006-2022": (2014, 0.99),
+    "2008-2022": (2014, 0.99),
 }
 means_offsets = {
     "1950-1984": (1958.3,  1.09),
@@ -221,10 +165,10 @@ fig, ax = plt.subplots(figsize=(14, 7))
 # Serie principal
 ax.plot(df.index, df['GA'], color='tab:blue', label='Grado de apertura (X+M)/PIB')
 y_max = ax.get_ylim()[1]
-add_hitos(ax, df.index, hitos_v, hitos_offset)
+add_hitos(ax, df.index, hitos_v_periodos, hitos_offset)
 #anotaciones de tasas
-periodos = [(1950,1985),(1985,2006),(2006,2022)]
-anot_years = [1950,1985,2006,2022]
+periodos = [(1950,1985),(1985,2006),(2008,2022)]
+anot_years = [1950,1985,2008,2022]
 abbr_map = {
     "GA":"GA",
 }
diff --git a/scripts/tesis/serie_completa/importaciones_y_exportaciones.py b/scripts/tesis/serie_completa/importaciones_y_exportaciones.py
index b65bdab..5da9693 100644
--- a/scripts/tesis/serie_completa/importaciones_y_exportaciones.py
+++ b/scripts/tesis/serie_completa/importaciones_y_exportaciones.py
@@ -66,7 +66,7 @@ print(cycle_stats)
 # ── 4. Hitos, años clave, offsets ────────────────────────────────────
 hitos_v = {
     1952: "Crisis", 1956: "Expansión", 1970: "Recesión",
-    1982: "Crisis", 1986: "Expansión", 2002: "Crisis",
+    1982: "Crisis", 1986: "Expansión", 2000: "Crisis",
     2006: "Expansión", 2014: "Recesión"
 }
 hitos_offset = {
diff --git "a/scripts/tesis/serie_completa/minerales/esta\303\261o.py" "b/scripts/tesis/serie_completa/minerales/esta\303\261o.py"
index 0e2d07d..cdf3241 100644
--- "a/scripts/tesis/serie_completa/minerales/esta\303\261o.py"
+++ "b/scripts/tesis/serie_completa/minerales/esta\303\261o.py"
@@ -19,43 +19,25 @@ import sys, os, sqlite3
 import pandas as pd
 import matplotlib.pyplot as plt
 sys.path.append(os.path.abspath('../'))
-from graficos_utils import (
-    add_hitos, add_cycle_means_multi,
-    add_year_value_annotations, add_period_growth_annotations_multi
-)
+from graficos_utils import *
+from config import *
 
 # 0. Ciclos y carpetas
-periods = {
-    "Expansión 92-99": slice(1992, 1999),
-    "Crisis 00-05":    slice(2000, 2005),
-    "Expansión 06-13": slice(2006, 2013),
-    "Recesión 14-23":  slice(2014, 2023),
-}
 output_dir = "../../../../assets/tesis/serie_completa/minerales"
 os.makedirs(output_dir, exist_ok=True)
-
-plt.style.use("seaborn-v0_8-whitegrid")
-plt.rcParams.update({
-    "font.family": "serif", "font.size": 12,
-    "axes.titlesize": 16,   "axes.labelsize": 14,
-    "grid.linestyle": "--", "lines.linewidth": 2,
-    "figure.dpi": 150,      "savefig.bbox": "tight",
-})
+set_style()
 
 # 1. Datos ────────────────────────────────────────────────────────────────
-with sqlite3.connect("../../../../db/proyectomacro.db") as conn:
-    df_estanio = (pd.read_sql(
-        "SELECT año, estaño_volumen, estaño_valor "
-        "FROM exportaciones_minerales_totales WHERE año > 1991", conn)
-        .set_index("año")
-        .sort_index()
-    )
-    df_precio = (pd.read_sql(
-        "SELECT año, estaño AS precio_usd_lf "
-        "FROM precio_oficial_minerales WHERE año > 1991", conn)
-        .set_index("año")
-        .sort_index()
-    )
+df_estanio = get_df(
+    sql="SELECT año, estaño_volumen, estaño_valor "
+        "FROM exportaciones_minerales_totales WHERE año > 1991",
+    conn_str="../../../../db/proyectomacro.db",
+)
+df_precio = get_df(
+    sql="SELECT año, estaño AS precio_usd_lf "
+        "FROM precio_oficial_minerales WHERE año > 1991",
+    conn_str="../../../../db/proyectomacro.db",
+)
 
 df = df_estanio.join(df_precio, how="inner")
 df["estanio_valor_musd"] = df["estaño_valor"] / 1_000        # miles → millones
@@ -66,9 +48,8 @@ cols   = ["estanio_valor_musd", "precio_usd_lf"]
 abbr   = {"estanio_valor_musd": "Valor", "precio_usd_lf": "Precio"}
 colors = {"estanio_valor_musd": "#4682b4", "precio_usd_lf": "#d62728"}  # azul acero + rojo
 
-cycle_stats = {n: df.loc[s, cols].mean().to_dict() for n, s in periods.items()}
-
-hitos_v      = {2000: "Crisis", 2006: "Expansión", 2014: "Recesión"}
+CYCLES=adjust_cycles(df,CYCLES)
+cycle_stats = {n: df.loc[s, cols].mean().to_dict() for n, s in CYCLES.items()}
 hitos_offset = {yr: .60 for yr in hitos_v}
 
 anot_years = [1992, 2000, 2006, 2014, 2023]
@@ -160,7 +141,7 @@ abbr_vol = {"estaño_volumen": "Vol", "precio_usd_lf": "P"}
 
 cycle_stats_vol = {
     n: df.loc[s, cols_vol].mean().to_dict()
-    for n, s in periods.items()
+    for n, s in CYCLES.items()
 }
 hitos_offset_v = {yr: .81 for yr in hitos_v}
 annotation_offsets_vol = {
@@ -199,7 +180,7 @@ ax_price.plot(df.index, df["precio_usd_lf"],
 
 # hitos ciclo
 add_hitos(ax_v, df.index, hitos_v, hitos_offset_v, line_kwargs={"lw":1})
-
+print(hitos_v)
 # espaciado 3 % del rango visible
 y_min, y_max = ax_v.get_ylim()
 line_spacing = (y_max - y_min) * 0.03
diff --git a/scripts/tesis/serie_completa/minerales/oro.py b/scripts/tesis/serie_completa/minerales/oro.py
index aef55c3..9a9f96e 100644
--- a/scripts/tesis/serie_completa/minerales/oro.py
+++ b/scripts/tesis/serie_completa/minerales/oro.py
@@ -19,28 +19,12 @@ import sys, os, sqlite3
 import pandas as pd
 import matplotlib.pyplot as plt
 sys.path.append(os.path.abspath('../'))
-from graficos_utils import (
-    add_hitos, add_cycle_means_multi,
-    add_year_value_annotations, add_period_growth_annotations_multi
-)
-
+from graficos_utils import *
+from config import *
 # 0. Ciclos y carpetas
-periods = {
-    "Expansión 92-99": slice(1992, 1999),
-    "Crisis 00-05":    slice(2000, 2005),
-    "Expansión 06-13": slice(2006, 2013),
-}
 output_dir = "../../../../assets/tesis/serie_completa/minerales"
 os.makedirs(output_dir, exist_ok=True)
-
-plt.style.use("seaborn-v0_8-whitegrid")
-plt.rcParams.update({
-    "font.family": "serif", "font.size": 12,
-    "axes.titlesize": 16,   "axes.labelsize": 14,
-    "grid.linestyle": "--", "lines.linewidth": 2,
-    "figure.dpi": 150,      "savefig.bbox": "tight",
-})
-
+set_style()
 # 1. Datos ────────────────────────────────────────────────────────────────
 with sqlite3.connect("../../../../db/proyectomacro.db") as conn:
     df_oro = (pd.read_sql(
@@ -64,15 +48,15 @@ df.drop(columns="oro_valor", inplace=True)
 df_base = df.loc[:2023]
 df_price = df[["precio_usd_ot"]]
 # ───────────────────────  GRÁFICA DUAL AXIS (valor-precio) ───────────────────────
-cols     = ["oro_valor_musd", "precio_usd_ot"]
+cols_sectores     = ["oro_valor_musd", "precio_usd_ot"]
 abbr     = {"oro_valor_musd": "Valor", "precio_usd_ot": "Precio"}
 colors   = {"oro_valor_musd": "#1f77b4", "precio_usd_ot": "#c49b07"}   # azul + dorado
 #1f77b4
+CYCLES=adjust_cycles(df,CYCLES)
 cycle_stats = {
-    n: df.loc[s, cols].mean().to_dict()
-    for n, s in periods.items()
+    name: df.loc[period, cols_sectores].mean().to_dict()
+    for name, period in CYCLES.items()
 }
-hitos_v      = {2000: "Crisis", 2006: "Expansión", 2014: "Recesión"}
 hitos_offset = {yr: .80 for yr in hitos_v}
 
 anot_years = [1992, 2000, 2006, 2014,2023, 2025]
@@ -85,7 +69,7 @@ annotation_offsets = {
     },
 }
 # Defino dos listas de periodos:
-growth_periods = [(1992,2000),(2000,2006),(2006,2014)]
+growth_periods=adjust_periods(df,periodos_tasas)
 
 period_growth_offsets = {
     "1992-2000": (1995,0.78), "2000-2006":(2001,0.78),
@@ -143,7 +127,7 @@ add_year_value_annotations(
 # Tasa sólo para el eje izquierdo (valor, hasta 2024)
 add_period_growth_annotations_multi(
     ax_val, df, growth_periods,
-    cols,
+    cols_sectores,
     period_growth_offsets,
     colors,
     abbr,
@@ -200,10 +184,10 @@ colors_vol = {
     "precio_usd_ot": colors["precio_usd_ot"]   # dorado del primer gráfico
 }
 abbr_vol = {"oro_volumen": "Vol", "precio_usd_ot": "P"}
-
+CYCLES=adjust_cycles(df,CYCLES)
 cycle_stats_vol = {
-    n: df.loc[s, cols_vol].mean().to_dict()
-    for n, s in periods.items()
+    name: df.loc[period, cols_vol].mean().to_dict()
+    for name, period in CYCLES.items()
 }
 
 annotation_offsets_vol = {
@@ -228,7 +212,6 @@ cycle_text_offsets_vol = {
     "Expansión 06-13": (2008,0.97),
     "Recesión 14-24":  (2016,0.97),
 }
-
 fig_v, ax_v = plt.subplots(figsize=(13,8))
 ax_price_v  = ax_v.twinx()
 
@@ -341,4 +324,4 @@ plt.show()
 
 
 # %%
-df
+adjust_annot_years(df,annot_years_periodos)
diff --git a/scripts/tesis/serie_completa/reservas_internacionales/reservas_internacionales.py b/scripts/tesis/serie_completa/reservas_internacionales/reservas_internacionales.py
new file mode 100644
index 0000000..b136c43
--- /dev/null
+++ b/scripts/tesis/serie_completa/reservas_internacionales/reservas_internacionales.py
@@ -0,0 +1,210 @@
+# ---
+# jupyter:
+#   jupytext:
+#     text_representation:
+#       extension: .py
+#       format_name: percent
+#       format_version: '1.3'
+#       jupytext_version: 1.17.2
+#   kernelspec:
+#     display_name: .venv
+#     language: python
+#     name: python3
+# ---
+
+# %%
+# ─────────────────────────────────────────────────────────────
+# Importaciones comunes
+# ─────────────────────────────────────────────────────────────
+import sys, os, sqlite3
+import numpy as np
+import pandas as pd
+import matplotlib.pyplot as plt
+
+sys.path.append(os.path.abspath('../'))  # utilidades propias
+from graficos_utils import *
+from config import (
+    CYCLES, annot_years, periodos_tasas, hitos_v,
+    CYCLES_SIN_CRISIS, annot_years_sin_crisis, periodos_tasas_sin_crisis, hitos_v_sin_crisis,
+    CYCLES_PERIODOS, annot_years_periodos, periodos_tasas_periodos, hitos_v_periodos,
+)
+
+# Directorio de salida y estilo
+output_dir = "../../../../assets/tesis/serie_completa/reservas_int"
+os.makedirs(output_dir, exist_ok=True)
+set_style()
+
+# ─────────────────────────────────────────────────────────────
+# Carga de datos
+# ─────────────────────────────────────────────────────────────
+with sqlite3.connect('../../../../db/proyectomacro.db') as conn:
+    df_res = (
+        pd.read_sql('SELECT año, reservas_totales FROM Reservas_oro_divisas', conn)
+          .set_index('año')
+          .sort_index()
+    )
+
+# ─────────────────────────────────────────────────────────────
+# Componentes
+# ─────────────────────────────────────────────────────────────
+componentes = [('reservas_totales', 'Reservas internacionales')]
+cols_componentes = ['reservas_totales']
+abbr_map = {'reservas_totales': 'Reservas'}
+custom_colors = {'reservas_totales': '#2ca02c'}  # verde
+
+# ============================================================
+# 1) CON CRISIS
+# ============================================================
+annotate_years = adjust_annot_years(df_res, annot_years)
+cycles_stats   = {n: df_res.loc[s, cols_componentes].mean().to_dict()
+                  for n, s in adjust_cycles(df_res, CYCLES).items()}
+periodos       = adjust_periods(df_res, periodos_tasas)
+
+annotation_offsets = {
+    'reservas_totales': {
+        1952: (0, -20),
+        1956: (0, -20),
+        1970: (0, -20),
+        1982: (0, -40),
+        1986: (0, -40),
+        2000: (0, -100),
+        2006: (0, -300),
+        2014: (0, -800),
+        2023: (0, -100),
+    },
+}
+
+hitos_offset   = {a: 0.8 for a in hitos_v}
+medias_offsets = {
+    'Expansión 56-69': (1956, 1),
+    'Recesión 70-81': (1970, 1),
+    'Expansión 86-99': (1986, 1),
+    'Crisis 00-05':    (2000, 1),
+    'Expansión 06-13': (2006, 1),
+    'Recesión 14-24':  (2014, 1),
+}
+
+tasas_offsets  = {
+    '1956-1970': (1963, 0.83),
+    '1970-1982': (1976, 0.83),
+    '1986-2000': (1993, 0.83),
+    '2000-2006': (2003, 0.83),
+    '2006-2014': (2010, 0.83),
+    '2014-2023': (2018, 0.65),
+}
+
+fig, ax = init_base_plot(
+    df_res, componentes, custom_colors,
+    "Reservas Internacionales (1950–2023) — Ciclos con Crisis",
+    "Año", "Millones de dólares",
+    source_text="Fuente: BM (1960–2023), BCB (1950–1960)"
+)
+add_hitos(ax, df_res.index, hitos_v, hitos_offset, line_kwargs={'lw':0.9})
+add_cycle_means_multi(ax, cycles_stats, medias_offsets, abbr_map, custom_colors,
+                      line_spacing=ax.get_ylim()[1]*0.03)
+add_year_value_annotations(ax, df_res, annotate_years, cols_componentes,
+                           annotation_offsets, custom_colors, arrow_lw=0.5)
+add_period_growth_annotations_multi(ax, df_res, periodos, cols_componentes,
+                                    tasas_offsets, custom_colors, abbr_map)
+ax.set_ylim(-400, df_res['reservas_totales'].max()*1.15)
+plt.savefig(os.path.join(output_dir, "reservas_ciclos.png"))
+plt.show()
+plt.close()
+
+
+# %%
+# ============================================================
+# 2) SIN CRISIS
+# ============================================================
+annotate_years_sin_crisis = adjust_annot_years(df_res, annot_years_sin_crisis)
+cycles_stats_sin_crisis   = {n: df_res.loc[s, cols_componentes].mean().to_dict()
+                             for n, s in adjust_cycles(df_res, CYCLES_SIN_CRISIS).items()}
+periodos_sin_crisis       = adjust_periods(df_res, periodos_tasas_sin_crisis)
+
+annotation_offsets_sin_crisis = {
+    'reservas_totales': {
+        1956: (0, -250), 1970: (0, -250), 1986: (0, -270),
+        2006: (0, -320), 2014: (0, -350), 2023: (0, -380),
+    }
+}
+
+hitos_offset_sin_crisis   = {a: 0.8 for a in hitos_v_sin_crisis}
+medias_offsets_sin_crisis = {
+    'Expansión 50-70': (1956, 1),
+    'Recesión 71-84':  (1971, 1),
+    'Expansión 85-05': (1986, 1),
+    'Expansión 06-14': (2006, 1),
+    'Recesión 15-23':  (2015, 1),
+}
+
+tasas_offsets_sin_crisis  = {
+    '1950-1970': (1956, 0.83),
+    '1971-1984': (1976, 0.83),
+    '1985-2005': (1993, 0.83),
+    '2006-2014': (2010, 0.83),
+    '2015-2022': (2018, 0.65),
+}
+
+fig, ax = init_base_plot(
+    df_res, componentes, custom_colors,
+    "Reservas Internacionales (1950–2023) — Sin Crisis",
+    "Año", "Millones de dólares",
+    source_text="Fuente: BM (1960–2023), BCB (1950–1960)"
+)
+add_hitos(ax, df_res.index, hitos_v_sin_crisis, hitos_offset_sin_crisis, line_kwargs={'lw':0.9})
+add_cycle_means_multi(ax, cycles_stats_sin_crisis, medias_offsets_sin_crisis,
+                      abbr_map, custom_colors, line_spacing=ax.get_ylim()[1]*0.03)
+add_year_value_annotations(ax, df_res, annotate_years_sin_crisis, cols_componentes,
+                           annotation_offsets_sin_crisis, custom_colors, arrow_lw=0.5)
+add_period_growth_annotations_multi(ax, df_res, periodos_sin_crisis, cols_componentes,
+                                    tasas_offsets_sin_crisis, custom_colors, abbr_map)
+ax.set_ylim(-400, df_res['reservas_totales'].max()*1.15)
+plt.savefig(os.path.join(output_dir, "reservas_sin_crisis.png"))
+plt.show()
+plt.close()
+
+# %%
+# ============================================================
+# 3) PERIODOS ESTRUCTURALES
+# ============================================================
+annotate_years_periodos = adjust_annot_years(df_res, annot_years_periodos)
+cycles_stats_periodos   = {n: df_res.loc[s, cols_componentes].mean().to_dict()
+                           for n, s in adjust_cycles(df_res, CYCLES_PERIODOS).items()}
+periodos_periodos       = adjust_periods(df_res, periodos_tasas_periodos)
+
+annotation_offsets_periodos = {
+    'reservas_totales': {
+        1950: (0, -250), 1985: (0, -300), 2006: (0, -320), 2023: (0, -380),
+    }
+}
+
+hitos_offset_periodos   = {a: 0.8 for a in hitos_v_periodos}
+medias_offsets_periodos = {
+    'Intervensionismo-estatal 50-84': (1967, 1),
+    'Neoliberalismo 85-05':   (1986, 1),
+    'Neodesarrollismo 06-24': (2006, 1),
+}
+
+tasas_offsets_periodos  = {
+    '1950-1984': (1967, 0.83),
+    '1985-2005': (1995, 0.83),
+    '2006-2023': (2014, 0.65),
+}
+
+fig, ax = init_base_plot(
+    df_res, componentes, custom_colors,
+    "Reservas Internacionales (1950–2023) — Periodos Económicos",
+    "Año", "Millones de dólares",
+    source_text="Fuente: BM (1960–2023), BCB (1950–1960)"
+)
+add_hitos(ax, df_res.index, hitos_v_periodos, hitos_offset_periodos, line_kwargs={'lw':0.9})
+add_cycle_means_multi(ax, cycles_stats_periodos, medias_offsets_periodos,
+                      abbr_map, custom_colors, line_spacing=ax.get_ylim()[1]*0.03)
+add_year_value_annotations(ax, df_res, annotate_years_periodos, cols_componentes,
+                           annotation_offsets_periodos, custom_colors, arrow_lw=0.5)
+add_period_growth_annotations_multi(ax, df_res, periodos_periodos, cols_componentes,
+                                    tasas_offsets_periodos, custom_colors, abbr_map)
+ax.set_ylim(-400, df_res['reservas_totales'].max()*1.15)
+plt.savefig(os.path.join(output_dir, "reservas_periodos.png"))
+plt.show()
+plt.close()
